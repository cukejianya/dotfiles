!# /usr/bin/env zsh

export PATH="/opt/homebrew/opt/mysql@8.4/bin:$PATH"
export PATH=$PATH:$HOME/.spicetify
export PATH="/opt/homebrew/opt/mysql@8.4/bin:$PATH"

source <(kubectl completion zsh)
source <(kubectl-site completion zsh)
source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
export FZF_BASE=$(brew --prefix)/opt/fzf

# Calls mvnw if found in the current project, otherwise execute the original mvn
mvn-or-mvnw() {
  [ -s "$HOME/.sdkman/bin/sdkman-init.sh" ] && unset -f sdk && source "$HOME/.sdkman/bin/sdkman-init.sh"
  local dir="$PWD"
  while [[ ! -x "$dir/mvnw" && "$dir" != / ]]; do
    dir="${dir:h}"
  done

  if [[ -x "$dir/mvnw" ]]; then
    echo "Running \`$dir/mvnw\`..." >&2
    "$dir/mvnw" "$@"
    return $?
  fi

  command mvn "$@"
}

sdk() {
  unset -f sdk
  [ -s "$HOME/.sdkman/bin/sdkman-init.sh" ] && source "$HOME/.sdkman/bin/sdkman-init.sh"
  sdk "$@"
}
export PYENV_ROOT="$HOME/.pyenv"
command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
source ~/.zprofile

alias close="aerospace list-apps | awk '{ print $5 }' | fzf | xargs killall"
